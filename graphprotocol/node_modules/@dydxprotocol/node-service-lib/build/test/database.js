'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.reset = reset;
exports.close = close;

var _sequelize = require('../helpers/sequelize');

var _sequelize2 = _interopRequireDefault(_sequelize);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

async function reset() {
  const promises = Object.values(_sequelize2.default.models).map(model => {
    // Sequelize uses the SequelizeMeta table to store info about migrations
    if (model.tableName === 'SequelizeMeta') {
      return null;
    }
    return model.destroy({ force: true, truncate: true, cascade: true });
  });
  await Promise.all(promises);
}

async function close() {
  await _sequelize2.default.close();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0L2RhdGFiYXNlLmpzIl0sIm5hbWVzIjpbInJlc2V0IiwiY2xvc2UiLCJwcm9taXNlcyIsIk9iamVjdCIsInZhbHVlcyIsInNlcXVlbGl6ZSIsIm1vZGVscyIsIm1hcCIsIm1vZGVsIiwidGFibGVOYW1lIiwiZGVzdHJveSIsImZvcmNlIiwidHJ1bmNhdGUiLCJjYXNjYWRlIiwiUHJvbWlzZSIsImFsbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFFc0JBLEssR0FBQUEsSztRQWFBQyxLLEdBQUFBLEs7O0FBZnRCOzs7Ozs7QUFFTyxlQUFlRCxLQUFmLEdBQXVCO0FBQzVCLFFBQU1FLFdBQVdDLE9BQU9DLE1BQVAsQ0FBY0Msb0JBQVVDLE1BQXhCLEVBQWdDQyxHQUFoQyxDQUNkQyxLQUFELElBQVc7QUFDVDtBQUNBLFFBQUlBLE1BQU1DLFNBQU4sS0FBb0IsZUFBeEIsRUFBeUM7QUFDdkMsYUFBTyxJQUFQO0FBQ0Q7QUFDRCxXQUFPRCxNQUFNRSxPQUFOLENBQWMsRUFBRUMsT0FBTyxJQUFULEVBQWVDLFVBQVUsSUFBekIsRUFBK0JDLFNBQVMsSUFBeEMsRUFBZCxDQUFQO0FBQ0QsR0FQYyxDQUFqQjtBQVNBLFFBQU1DLFFBQVFDLEdBQVIsQ0FBWWIsUUFBWixDQUFOO0FBQ0Q7O0FBRU0sZUFBZUQsS0FBZixHQUF1QjtBQUM1QixRQUFNSSxvQkFBVUosS0FBVixFQUFOO0FBQ0QiLCJmaWxlIjoiZGF0YWJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2VxdWVsaXplIGZyb20gJy4uL2hlbHBlcnMvc2VxdWVsaXplJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2V0KCkge1xuICBjb25zdCBwcm9taXNlcyA9IE9iamVjdC52YWx1ZXMoc2VxdWVsaXplLm1vZGVscykubWFwKFxuICAgIChtb2RlbCkgPT4ge1xuICAgICAgLy8gU2VxdWVsaXplIHVzZXMgdGhlIFNlcXVlbGl6ZU1ldGEgdGFibGUgdG8gc3RvcmUgaW5mbyBhYm91dCBtaWdyYXRpb25zXG4gICAgICBpZiAobW9kZWwudGFibGVOYW1lID09PSAnU2VxdWVsaXplTWV0YScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gbW9kZWwuZGVzdHJveSh7IGZvcmNlOiB0cnVlLCB0cnVuY2F0ZTogdHJ1ZSwgY2FzY2FkZTogdHJ1ZSB9KTtcbiAgICB9LFxuICApO1xuICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgYXdhaXQgc2VxdWVsaXplLmNsb3NlKCk7XG59XG4iXX0=