'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.handleIse = handleIse;
exports.handleValidationErrors = handleValidationErrors;

var _check = require('express-validator/check');

var _logger = require('./logger');

var _logger2 = _interopRequireDefault(_logger);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint no-console: 0 */

function handleIse(at, message, error, res) {
  if (process.env.NODE_ENV === 'development') {
    console.error(error);
  }
  _logger2.default.error({
    at,
    message,
    error
  });
  res.sendStatus(500);
}

function handleValidationErrors(req, res, next) {
  const errors = (0, _check.validationResult)(req);
  if (!errors.isEmpty()) {
    return res.status(400).json({ errors: errors.array() });
  }
  return next();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9oZWxwZXJzL2Vycm9yLWhhbmRsZXIuanMiXSwibmFtZXMiOlsiaGFuZGxlSXNlIiwiaGFuZGxlVmFsaWRhdGlvbkVycm9ycyIsImF0IiwibWVzc2FnZSIsImVycm9yIiwicmVzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiY29uc29sZSIsIkxvZ2dlciIsInNlbmRTdGF0dXMiLCJyZXEiLCJuZXh0IiwiZXJyb3JzIiwiaXNFbXB0eSIsInN0YXR1cyIsImpzb24iLCJhcnJheSJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFLZ0JBLFMsR0FBQUEsUztRQVlBQyxzQixHQUFBQSxzQjs7QUFmaEI7O0FBQ0E7Ozs7OztBQUhBOztBQUtPLFNBQVNELFNBQVQsQ0FBbUJFLEVBQW5CLEVBQXVCQyxPQUF2QixFQUFnQ0MsS0FBaEMsRUFBdUNDLEdBQXZDLEVBQTRDO0FBQ2pELE1BQUlDLFFBQVFDLEdBQVIsQ0FBWUMsUUFBWixLQUF5QixhQUE3QixFQUE0QztBQUMxQ0MsWUFBUUwsS0FBUixDQUFjQSxLQUFkO0FBQ0Q7QUFDRE0sbUJBQU9OLEtBQVAsQ0FBYTtBQUNYRixNQURXO0FBRVhDLFdBRlc7QUFHWEM7QUFIVyxHQUFiO0FBS0FDLE1BQUlNLFVBQUosQ0FBZSxHQUFmO0FBQ0Q7O0FBRU0sU0FBU1Ysc0JBQVQsQ0FBZ0NXLEdBQWhDLEVBQXFDUCxHQUFyQyxFQUEwQ1EsSUFBMUMsRUFBZ0Q7QUFDckQsUUFBTUMsU0FBUyw2QkFBaUJGLEdBQWpCLENBQWY7QUFDQSxNQUFJLENBQUNFLE9BQU9DLE9BQVAsRUFBTCxFQUF1QjtBQUNyQixXQUFPVixJQUFJVyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsRUFBRUgsUUFBUUEsT0FBT0ksS0FBUCxFQUFWLEVBQXJCLENBQVA7QUFDRDtBQUNELFNBQU9MLE1BQVA7QUFDRCIsImZpbGUiOiJlcnJvci1oYW5kbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IG5vLWNvbnNvbGU6IDAgKi9cblxuaW1wb3J0IHsgdmFsaWRhdGlvblJlc3VsdCB9IGZyb20gJ2V4cHJlc3MtdmFsaWRhdG9yL2NoZWNrJztcbmltcG9ydCBMb2dnZXIgZnJvbSAnLi9sb2dnZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlSXNlKGF0LCBtZXNzYWdlLCBlcnJvciwgcmVzKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9XG4gIExvZ2dlci5lcnJvcih7XG4gICAgYXQsXG4gICAgbWVzc2FnZSxcbiAgICBlcnJvcixcbiAgfSk7XG4gIHJlcy5zZW5kU3RhdHVzKDUwMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3JzOiBlcnJvcnMuYXJyYXkoKSB9KTtcbiAgfVxuICByZXR1cm4gbmV4dCgpO1xufVxuIl19