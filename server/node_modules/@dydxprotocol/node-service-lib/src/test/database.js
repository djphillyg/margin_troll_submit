import sequelize from '../helpers/sequelize';

export async function reset() {
  const promises = Object.values(sequelize.models).map(
    (model) => {
      // Sequelize uses the SequelizeMeta table to store info about migrations
      if (model.tableName === 'SequelizeMeta') {
        return null;
      }
      return model.destroy({ force: true, truncate: true, cascade: true });
    },
  );
  await Promise.all(promises);
}

export async function close() {
  await sequelize.close();
}
